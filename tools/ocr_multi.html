<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
  <title>多图合并 · NovaBoard</title>
  <link rel="preload" href="../assets/icons.svg" as="image">
  <link rel="stylesheet" href="../assets/css/style.css">
  <script defer src="../assets/js/app.js"></script>
</head>
<body data-page="tool" data-asset-prefix="../">
  <object data="../assets/icons.svg" type="image/svg+xml" style="display:none"></object>
  <main class="container">
    <a class="back-link" href="../category/ocr.html">
      <svg class="icon"><use href="../assets/icons.svg#icon-back"></use></svg>
      返回视觉识别
    </a>
    <header class="page-header">
      <div class="brand">多图合并</div>
      <p class="sub">支持多张图片批量识别并合并输出，适用于课堂笔记、会议白板等场景。</p>
    </header>

    <section class="card stack">
      <label class="field">上传图片
        <input type="file" accept="image/*" multiple onchange="previewFiles(event)" />
      </label>
      <div id="previewList" class="note-list" style="grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));"></div>
      <textarea id="output" class="textarea" placeholder="合并结果会显示在这里…" readonly></textarea>
      <div class="actions">
        <button type="button" class="btn primary" onclick="copyResult()">
          <svg class="icon"><use href="../assets/icons.svg#icon-copy"></use></svg> 复制结果
        </button>
      </div>
      <p class="sub">提示：可以在 <code>previewFiles</code> 函数内调用后端 OCR 接口，并将拼接后的结果写入上方文本框。</p>
    </section>
  </main>

  <nav class="navbar">
    <a href="../index.html" data-nav="home">
      <svg class="icon"><use href="../assets/icons.svg#icon-home"></use></svg>
      <span>首页</span>
    </a>
    <a href="../favorites.html" data-nav="favorites">
      <svg class="icon"><use href="../assets/icons.svg#icon-star"></use></svg>
      <span>收藏</span>
    </a>
    <a href="../profile.html" data-nav="profile">
      <svg class="icon"><use href="../assets/icons.svg#icon-user"></use></svg>
      <span>我的</span>
    </a>
    <a href="../settings.html" data-nav="settings">
      <svg class="icon"><use href="../assets/icons.svg#icon-settings"></use></svg>
      <span>设置</span>
    </a>
  </nav>

  <script>
    function previewFiles(event) {
      const files = Array.from(event.target.files || []);
      const list = document.getElementById('previewList');
      list.innerHTML = '';
      if (!files.length) return;
      files.forEach((file) => {
        const wrapper = document.createElement('div');
        wrapper.className = 'note-card';
        const img = document.createElement('img');
        img.src = URL.createObjectURL(file);
        img.alt = file.name;
        img.className = 'object-cover';
        img.style.height = '120px';
        img.style.borderRadius = '12px';
        const caption = document.createElement('p');
        caption.textContent = file.name;
        wrapper.append(img, caption);
        list.appendChild(wrapper);
      });
      document.getElementById('output').value = '（这里将调用 OCR 模型 API，合并后的文字会显示在这里）';
    }

    function copyResult() {
      const text = document.getElementById('output').value;
      if (!text) return;
      navigator.clipboard?.writeText(text).then(() => {
        alert('识别结果已复制到剪贴板');
      }).catch(() => {
        alert('复制失败，请手动选择文本复制。');
      });
    }
  </script>
</body>
</html>
